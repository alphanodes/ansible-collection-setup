---

# Mailpit - email testing tool for developers
# see https://github.com/axllent/mailpit

# Version to install - can be specific version (e.g. '1.20.0') or 'latest'
# When set to 'latest', the role will fetch the latest release from GitHub API
mailpit_version: latest
mailpit_arch: "{{ 'arm64' if ansible_facts['architecture'] == 'aarch64' else 'amd64' }}"
mailpit_binary_path: /usr/local/bin/mailpit

mailpit_service_user: mailpit
mailpit_service_group: mailpit

# SMTP server configuration
mailpit_smtp_bind: 127.0.0.1:1025
mailpit_smtp_auth_accept_any: false
mailpit_smtp_auth_allow_insecure: false

# Web UI configuration
mailpit_ui_bind: 127.0.0.1:8025

# nginx vhost configuration
mailpit_vhost_server: mail.local
mailpit_vhost_users: []
mailpit_vhost_for_zabbix: false
mailpit_vhost_letsencrypt: false
mailpit_vhost_ssl_cert: '{{ ssl_certs[0].name | default(omit) }}'
mailpit_vhost_letsencrypt_cert: /etc/letsencrypt/live/{{ letsencrypt_default_cert | default(ansible_host) }}/fullchain.pem
mailpit_vhost_letsencrypt_key: /etc/letsencrypt/live/{{ letsencrypt_default_cert | default(ansible_host) }}/privkey.pem

# Deployment mode selection:
# '/' = Subdomain deployment (default): creates dedicated vhost via nginx_mono
# '/mail/' = Path-based deployment: creates nginx include file at /etc/nginx/mailpit.conf
#            User must include this in existing vhost via vhost_includes: [mailpit]
mailpit_webroot: '/'

# Additional mailpit options
mailpit_max_messages: 1000
mailpit_use_message_dates: false

# Enable/disable mailpit service
mailpit_enabled: true
mailpit_remove: false
