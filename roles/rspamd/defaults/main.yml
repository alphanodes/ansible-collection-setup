---

# see https://thomas-leister.de/mailserver-debian-buster/

# DKIM - https://de.wikipedia.org/wiki/DomainKeys
# or https://www.united-domains.de/help/faq-article/was-ist-ein-dkim-eintrag

# DMARC - https://de.wikipedia.org/wiki/DMARC
# DMARC-Einträge bestimmen, was ein fremder Mailserver tun soll,
# wenn eine von ihm empfangene Mail nach SPF- und DKIM-Checks offenbar nicht
# vom korrekten Mailserver stammt (wenn der Absender also gefälscht wurde).

rspamd_packages:
  - rspamd

rspamd_user: _rspamd

rspamd_apt_url: http://rspamd.com/apt-stable/
rspamd_apt_signed_by: https://rspamd.com/apt-stable/gpg.key
rspamd_apt_suites: "{{ ansible_distribution_release }}"
rspamd_apt_components: main

rspamd_enable_service: true

# see https://rspamd.com/doc/configuration/logging.html
rspamd_log_level: warning

# DKIM configuration
# IMPORTANT: DKIM keys are now managed by alphanodes.setup.dkim role!
# The dkim role is automatically included and configured if rspamd_dkim_domains is defined
#
# Option 1: Let rspamd role handle DKIM setup (recommended for new installations)
# rspamd_dkim_domains:
#   - domain: example.com
#     selector: mail
#     key_size: 2048
#   - domain: example.org
#     selector: default
#     key_size: 2048
# Keys will be generated at /var/lib/dkim/<domain>/<selector>.key with _rspamd ownership
#
# Option 2: Use pre-existing DKIM keys (for migrations or manual setups)
# Set rspamd_dkim_key to point to existing key generated by dkim role
# rspamd_dkim_key: /var/lib/dkim/example.com/mail.key
# rspamd_dkim_selector: mail
rspamd_dkim_key: ''  # Path to DKIM private key (if using Option 2)
rspamd_dkim_selector: mail  # DKIM selector name

rspamd_remove: false

rspamd_vhost_server: rspamd.local
rspamd_vhost_location: /
rspamd_vhost_letsencrypt: false
rspamd_vhost_ssl_cert: "{{ ssl_certs[0].name | default('') }}"
rspamd_vhost_letsencrypt_cert: /etc/letsencrypt/live/{{ letsencrypt_default_cert | default(ansible_host) }}/fullchain.pem
rspamd_vhost_letsencrypt_key: /etc/letsencrypt/live/{{ letsencrypt_default_cert | default(ansible_host) }}/privkey.pem
rspamd_vhost_letsencrypt_trusted_cert: /etc/letsencrypt/live/{{ letsencrypt_default_cert | default(ansible_host) }}/chain.pem
rspamd_vhost_for_zabbix: false

# nginx base auth user
rspamd_web_user: rspamd
# nginx base auth passwords (leave empty, if you do not want base auth protection)
rspamd_web_password: ''

# see https://rspamd.com/doc/configuration/redis.html
rspamd_redis_servers: "127.0.0.1"
# if you don't use the default database in Redis
# (let's say you use the database 1 instead of the default 0
rspamd_redis_db: 1

# “IP”-Listen können IPv6- und IPv4-Adressen bzw. Adressbereiche enthalten - in jeder Zeile ein Eintrag.
# “From”-Listen enthalten vollständige Absendermailadressen.
# Sie eignen sich gut, wenn man später einmal für einzelne Absender
# oder Server Ausnahmen einstellen möchte.
rspamd_whitelist_ip: []
rspamd_whitelist_from: []
rspamd_blacklist_ip: []
rspamd_blacklist_from: []

# see https://rspamd.com/doc/workers/controller.html
# generate it with: rspamadm pw
# and provide it with rspamd_worker_controller_password
# rspamd_worker_controller_password:

rspamd_worker_controller_secure_ip: 127.0.0.1
