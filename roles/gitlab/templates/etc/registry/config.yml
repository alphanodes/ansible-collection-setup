---
version: 0.1
log:
  level: info
  fields:
    service: registry

storage:
  s3:
    accesskey: {{ gitlab_registry_s3_access_key }}
    secretkey: {{ gitlab_registry_s3_secret_key }}
    region: {{ gitlab_registry_s3_region }}
    bucket: {{ gitlab_registry_s3_bucket }}
    regionendpoint: {{ gitlab_registry_s3_endpoint }}
    secure: true
    v4auth: true

http:
  addr: 127.0.0.1:{{ gitlab_registry_internal_port }}
  secret: {{ gitlab_registry_secret }}
  headers:
    X-Content-Type-Options: [nosniff]

auth:
  token:
    realm: {{ gitlab_registry_realm }}
    service: container_registry
    issuer: {{ gitlab_registry_token_issuer }}
    rootcertbundle: {{ gitlab_registry_cert_bundle }}

health:
  storagedriver:
    enabled: true
    interval: 10s
    threshold: 3
